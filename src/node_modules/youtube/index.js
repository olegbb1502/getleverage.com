module.exports = function() {
  var $play = document.getElementById('youtube-play')
  if (!$play) return

  var first = document.getElementsByTagName('script')[0]
  var script = document.createElement('script')
  script.src = 'https://www.youtube.com/iframe_api'
  first.parentNode.insertBefore(script, first)

  var player
  function onYouTubeStateChange(event) {
    if (event.data === YT.PlayerState.PLAYING) $play.style.display = 'none'
    if (event.data === YT.PlayerState.PAUSED) $play.style.display = 'block'
  }

  function onYouTubeReady() {
    $play.addEventListener('click', function() {
      $play.style.display = 'none'
      player.playVideo()
    })
  }

  window.onYouTubeIframeAPIReady = function() {
    player = new YT.Player('video', {
      events: {
        onStateChange: onYouTubeStateChange,
        onReady: onYouTubeReady,
      }
    })
  }
}
